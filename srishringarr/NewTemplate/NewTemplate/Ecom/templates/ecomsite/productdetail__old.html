{% extends "basesite.html" %} 
{% load site_filters %}
{% load staticfiles %} 
{% block content %}
 <link href="{% static 'css/datepicker.css' %}" rel="stylesheet" type="text/css">
 <link href="{% static 'css/drift-basic.css' %}" rel="stylesheet" type="text/css">
<style>
	.prodGalleryImg {
		width: 80px;
	    height: 80px;
	    border: 1px solid #424242;
	    margin:5px;
	}
	.g-background {
		height: 5px;
	    position: relative;
	    background: #f0f0f0;
	    margin-top: 7px;
	    margin-left: 7px;
	    border-radius: 100px;
	    width: 80%;
	}
	.ratio-background {
		left: 0;
	    position: absolute;
	    height: 5px;
	    transform: scaleX(1);
	    transform-origin: left center;
	    transition: transform 0.4s cubic-bezier(0, 0, 0.3, 1) 0.3s, -webkit-transform 0.4s cubic-bezier(0, 0, 0.3, 1) 0.3s;
	    border-radius: 100px;
	    width:100%;
	    background-color: #388e3c;
	}

	.zoom:hover {
		transform: scale(1.5); /* (150% zoom - Note: if the zoom is too large, it will go outside of the viewport) */
		overflow: scroll;
	}

	.pointer {cursor: pointer;}
</style>

			            
<form method="post" style="margin-bottom: 0;" enctype="multipart/form-data" >
	{% csrf_token %}
<!-- 	{% if prod_detail_setting.top_msg %}
		<section class="bg-title-page p-t-50 p-b-40 flex-col-c-m" style="background-image: url({% static 'images/site/grid_images/img-1.jpg' %});">
			<h2 class="l-text2 t-center">
				Women
			</h2>
			<p class="m-text13 t-center">
				{{ product_details_options.product_top_message }}
			</p>
		</section>
	{% endif %} -->
	
		<!-- Product Detail -->
		<div class="container bgwhite p-t-35 p-b-80">
			<div class="flex-w flex-sb" >
				<div class="w-size13 p-t-30 respon5">
					<div class="wrap-slick3 flex-sb flex-w">
						<div class="wrap-slick3-dots y-scroll"></div>
	
						<div class="slick3">
							{% if product_details.product_thumb_image %}
								{% for image in product_details.product_thumb_image|getList %}
									<div class="item-slick3" data-thumb="{%static '/images/catalog/products/thumbnail/'%}{{image}}">
										<div class="wrap-pic-w">
										<img class="drift-demo-trigger zoom" data-zoom="{% static '/images/catalog/products/thumbnail/' %}{{image}}" src="{% static '/images/catalog/products/thumbnail/' %}{{image}}" alt="IMG-PRODUCT"  style="width:99%;border:1px solid #ccc;">
										 <div class="detail">
									        <section>         
									        </section>   
										</div>	
										</div>
									</div>
								{% endfor %}
							{% endif %}
						</div>
					</div>
				</div>
	
				<div class="w-size14 p-t-30 respon5">
					<div class="bo9 p-l-20 p-r-20 p-t-20 p-b-80">															
						{% if prod_detail_setting.prod_name %}
							<h4 class="product-detail-name m-text15 p-b-10">
								{{ product_details.name }}
							</h4>
						{% endif %}
						
						<!-- {% if prod_detail_setting.s_review %}
							<div class="s-text8 fs-15 p-b-10"> 
								<span style="margin:5px;padding: 3px 9px; border-radius: 2px; min-width: 36px; position: relative; border: 1px solid #000;background-color: #4CAF50;color: #fff;">{{ avg_ratings }}
								</span>, {{ ratings }} Ratings & {{ reviews }} Reviews
							</div>
						{% endif %} -->
						
						{% if prod_detail_setting.s_review or prod_detail_setting.price or prod_detail_setting.offer %}
							<div class="fs-15 p-b-5">
							<strong>
								{% if prod_detail_setting.discount %}
									<span class="s-text3">
										MRP:- Rs. {{ product_details.final_product_price|floatformat:"0" }}&nbsp;<span style="color:#A4A4A4;">
											<!-- <strike> Rs. {{ product_details.mrp|floatformat:"0" }} </strike> -->
										</span>
									</span>
								{% else %}
									{% if prod_detail_setting.price %}
										<span class="s-text3">Rs. {{ product_details.mrp  }}</span>
									{% endif %}	
								{% endif %}
								</strong>
							</div>
						{% endif %}
						
						<!-- {% if prod_detail_setting.offer %}
							<div class="fs-15 p-b-5">
								<div class="s-text3">
									Get {{ product_details.discount|floatformat:"0"  }}% Off <span style="color:green;"> &nbsp;&nbsp;Save Rs. {{ product_details.product_saving_price|floatformat:"0" }}</span>
								</div>
							</div>
						{% endif %} -->
						<!-- <div class="flex-c-m bo-rad-23 float-r m-text3 trans-0-4">
							<div class="flex-m flex-w">
								<div class="btn-addcart-product-detail size9 trans-0-4 m-t-10 m-b-10">
									<input class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4 pointer" type="button"  value="Add To Cart"  id = "add_to_cart" name="add_to_cart" onclick="addToCart('{{ product_details.id }}','0');" style="background-color: #e6be6e;color: #444;"/>
								</div>
							</div>
						</div> -->
					<!-- </div>	 -->
						<br>
						{% if prod_detail_setting.is_rent %}
						<!-- <div class="bo9 p-l-20 p-r-20 p-t-20 p-b-80 m-t-20"> -->
							<div class="p-b-10 flex-w">
								<strong>Rental period &nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp;  </strong>
								<div class="p-b-10 flex-w">
									<form class = "formimages" enctype="multipart/form-data" method="POST" >
										{%csrf_token%}
										<div class="flex-w">
											{% for data in rent_details.days|getList %}
												
												<div class="s-text15 m-l-10 m-r-10 m-t-10 m-b-10">
													<input type="radio" name="days" value="{{data}}" id="days_{{forloop.counter}}" onClick="calculateRent('{{rent_details.percent_value}}','{{forloop.counter}}','{{ product_details.mrp }}','{{ data }}','{{ product_details.mrp }}','1');" > {{ data }}<br>
												</div>
											{% endfor %}
										</div>
									</form>
								</div>	
							</div>
							<div class="flex-w">
								<strong><span class="s-text15">Select Date : </span>
								</strong>
								<div class="flex-w">
									<!-- <input type="text" data-range="true" data-multiple-dates-separator=" - " data-language="en" class="datepicker-here" /> -->
									<!-- <div class="bo1 m-l-10"><input type='text' class='datepicker-here' data-language='en' placeholder="From Date" style="padding:5px;width:150px;" name="from_selected_days" id="from_selected_days" onfocusout="myFunction()" value="{{ cart_details.form_date }}"/></div> -->
									<div class="bo1 m-l-10"><input type='text' class='datepicker-here' data-language='en' placeholder="From Date" style="padding:5px;width:150px;" name="from_selected_days" id="from_selected_days" onclick="rentDate();" value="{{ cart_details.form_date }}"/></div>
									<div class="bo1 m-l-10"><input type='text'  placeholder="To date" style="padding:5px; width:150px;" name="to_selected_days" id="to_selected_days" readonly="readonly" value="{{ cart_details.to_date }}"/></div>
								</div>
							</div>
							
							<div>
								<strong>
									<span class="s-text15"  style="color: #929090;"> Rent Price : </span>
								</strong>
								<span class="s-text15"  style="color: #000;" id="rentalValue" >Rs. 0 </span>
							</div>
							<div>
								<strong>
									<span class="s-text15"  style="color: #929090;"> Deposit : </span>
								</strong>
								<span class="s-text15" id="finalVaueForRentel" style="color: #000;"></span>
								<!-- <span class="s-text15" id="finalVaueForRentel" style="color: #000;">Rs. {{ product_details.mrp|floatformat:"0" }} </span> -->
							</div>	
							<!-- <div class="m-t-20">
								<strong>
									<span class="s-text15"  style="color: #000;"> Total amount for Rental : </span>
									<span class="s-text15"  style="color: #000;" id="finalVaueForRentel"></span>
								</strong>	
							</div> -->	
							<div class="flex-c-m bo-rad-23 float-r m-text3 trans-0-4">
								<div class="flex-m flex-w">
									<div class="btn-addcart-product-detail size9 trans-0-4 m-t-10 m-b-10 pointer">
										<input class="flex-c-m sizefull bg1 bo-rad-23 hov1 s-text1 trans-0-4 pointer" type="button"  value="Add To Cart"  id = "add_to_cart" name="add_to_cart" onclick="addToCart('{{ product_details.id }}','0');" style="background-color: #e6be6e;color: #444;"/>
									</div>
								</div>
							</div>
							<input type="hidden" name="h_days_index" id="id_days_index" value="" />
							
						{% endif %}
						
						{% if prod_detail_setting.stock %}
							{% if product_details.quantity == 0 %}
								{% if request.session.site_isUserLogin %}
									<input type="submit" style="background: #F86C6B;border:0; color: #fff; padding:1%;" name="product_details" value="Notify Me" />
								{% else %}
									<input type="text" style="background-color: transparent; color: #000; outline: none; outline-style: none; border-top: none; border-left: none; border-right: none; border-bottom: solid #627492 1px; padding: 3px 10px;"
									 name="user_info" placeholder="Enter Email/Mobile to Notify" value="" />
									<input type="submit" style="background: #F86C6B;border:0; color: #fff; padding:1%;" name="product_details" value="Notify Me" />
								{% endif %}
							{% else %}
								<div class="m-b-15 m-t-15">
								<strong><span class="s-text10" style="color: #878787;">Stock &nbsp;&nbsp;&nbsp; : &nbsp;&nbsp;&nbsp;&nbsp;  </span> </strong>
									<span class="s-text15 m-b-15 m-t-15 m-l-15 ">{{ product_details.quantity  }} in stock</span>
								</div>
							{% endif %}
						{% endif %}
						
						<!-- {% if prod_detail_setting.delivery_option %}
							<div>
								<strong><span class="s-text10" style="color: #929090;">Delivery&nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
								<span class="effect1">						
									<input class="s-text15 m-t-15 m-l-15 " type="text" name="pincode" placeholder="Enter Pin Code" value="{% if request.session.pincode != 0 %}{{ request.session.pincode }}{% endif %}">
									<span class="effect1-line"></span>
								</span>
								<span class="w-size2">
									<input type="submit" class="s-text18 wo-bg-btn" name="product_details" value="Check" />
								</span>
							</div>
							<div class="s-text15 p-b-10 m-l-100">
								Usually delivered in 9-10 days?<br>
								{% if request.session.pincode != 0 %}Delivery Charges ({{ distance|floatformat:"0" }} km) Rs. {{delivery_charge}} {% else %} Enter pincode for exact delivery dates/charges {% endif %}<br>
							</div>
						{% endif %} -->
						
						{% if prod_detail_setting.color %}
							<div class="m-b-15 m-t-15">
								<strong>
									<span class="s-text10" style="color: #878787;">Color &nbsp;&nbsp;&nbsp; : &nbsp;&nbsp;&nbsp;&nbsp;  </span> 
								</strong>
								<span class="s-text15 m-b-15 m-t-15 m-l-15 ">{{ product_details.color }}</span>
							</div>
						{% endif %}
					
					<!-- {% if prod_detail_setting.size %}
						<div class="m-text12 p-b-5">
							<strong><span class="s-text15"  style="color: #929090;">Size &nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp;  </span></strong>
							{% for data in product_details.size|getList %}
									<span class="s-text15 size-filter"><strong>{{ data }}</strong></span>
							{% endfor %}
						</div>
					{% endif %}
					
					{% if prod_detail_setting.size_chart %}
						<div class="p-b-10">
						<strong><span class="s-text15"  style="color: #929090;">Size Chart &nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp;  </span></strong>
						<span class="s-text15">To view click <a href="">here</a>.</span>
						</div>
					{% endif %} -->
					
					
					
					<!-- Will use in future 
					{% if prod_detail_setting.seller %}
						<div class="p-b-5">
							<span class="m-text18" style="color: #929090;">Seller: </span>
							<span class="m-text18"></span>
						</div>
					{% endif %} -->

						<div class="wrap-dropdown-content bo7 p-t-15 p-b-14 m-t-40 active-dropdown-content">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Description
								<!-- <i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i> -->
							</h5>
							<hr/>
							<div class="dropdown-content p-t-15 p-b-23">
								<p class="s-text8">
									{{ product_details.description|safe|linebreaks }}
								</p>
							</div>
						</div>
					</div>
				</div>
					<!-- {% if prod_detail_setting.description %}
						<div class="wrap-dropdown-content bo7 p-t-15 p-b-14 m-t-40 active-dropdown-content">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Description
								<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
							</h5>
		
							<div class="dropdown-content dis-none p-t-15 p-b-23">
								<p class="s-text8">
									{{ product_details.small_description|safe }}
								</p>
							</div>
						</div>
					{% endif %}
					
					{% if prod_detail_setting.highlights %}
						<div class="wrap-dropdown-content bo6 p-t-15 p-b-14">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Highlights
								<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
							</h5>
			
							<div class="dropdown-content dis-none p-t-15 p-b-23">
								<p class="s-text8">
									{{ product_details.highlights }}
								</p>
							</div>
						</div>
					{% endif %}
					
					{% if prod_detail_setting.services %}
						<div class="wrap-dropdown-content bo7 p-t-15 p-b-14">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Services
								<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
							</h5>
		
							<div class="dropdown-content dis-none p-t-15 p-b-23">
								<p class="s-text8">
									{{ product_details.services }}
								</p>
							</div>
						</div>
					{% endif %}
										
					{% if prod_detail_setting.specifications %}
						<div class="wrap-dropdown-content bo7 p-t-15 p-b-14">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Specifications
								<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
							</h5>
		
							<div class="dropdown-content dis-none p-t-15 p-b-23">
								<p class="s-text8">
									{{ product_details.specifications }}
								</p>
							</div>
						</div>
					{% endif %}
					
					{% if prod_detail_setting.rating_reviews %}
						<div class="wrap-dropdown-content bo7 p-t-15 p-b-14">
							<h5 class="js-toggle-dropdown-content flex-sb-m cs-pointer m-text18 color0-hov trans-0-4" style="color: #929090;">
								Ratings and Reviews
								<i class="down-mark fs-12 color1 fa fa-minus dis-none" aria-hidden="true"></i>
								<i class="up-mark fs-12 color1 fa fa-plus" aria-hidden="true"></i>
							</h5>
		
							<div class="dropdown-content dis-none p-t-15 p-b-23 m-l-20">
								<div class="s-text15 p-b-5">
									<strong><span class="s-text10" style="color: #929090;">Ratings&nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
				 					<span class="m-l-20">{{ ratings }} Ratings</span> ,  <span style="margin:5px;padding: 3px 9px; border-radius: 2px; min-width: 36px; position: relative; border: 1px solid #000;background-color: #4CAF50;color: #fff;">{{ avg_ratings }}</span>
								 	<br>
								 	
								 	<div class="s-text7 p-b-10 p-t-10 p-r-10 w-size16 m-l-110 m-t-10 dis-flex">
							 		 	<span class="s-text15 m-r-5">5</span> 						 		 	
							 		 		<div class="g-background">
							 		 			<div class="ratio-background"></div>
							 		 		</div>						 		 		
							 		 	<span class="s-text15 m-l-10">00</span>
						 		 	</div>						 		 	
									 <br>								 	
							 		<div class="rating float-l m-l-100">
							 		    <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="5 stars">5 stars</label>
									    <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 stars">4 stars</label>
									    <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 stars">3 stars</label>
									    <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 stars">2 stars</label>
									    <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 stars">1 star</label>
									</div> <br>
									<div class="w-full t-left float-l m-l-100">
										<input class="s-text18 wo-bg-btn p-t-5 p-l-5" style="vertical-align: -webkit-baseline-middle;" type="button" value="Save Ratings" id = "ratings" name="ratings" onclick="addUserRetings('{{ product_details.id }}');"/>
			 						</div>
			 					</div>
			 					
			 					<div class="m-t-50">			 					
			 						<strong><span class="s-text10" style="color: #929090;">Reviews&nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
			 						<span class="s-text15 m-l-20">{{ reviews }} Reviews</span>
			 						<br/> 
			 						<textarea class="s-text7 bo4 p-b-10 p-t-10 p-r-10 p-l-10 w-size16 m-l-110 m-t-10" placeholder="Add Reviews" id = "user_reviews" name="add_user_reviews" ></textarea>
									<input class="s-text18 wo-bg-btn m-l-110" type="button" value="Save Review" id = "review" name="review" onclick="addUserReviews('{{ product_details.id }}');"/>				 					
			 					</div>
			 					
			 					<div class="m-t-50">
			 						<strong><span class="s-text10" style="color: #929090;">User Reviews&nbsp;&nbsp;&nbsp;  :   &nbsp;&nbsp;&nbsp;&nbsp; </span></strong>
			 						{% for reviewsOjb in reviews_list %}
										<div class="m-l-110">
										  	<strong><span class="s-text15"  style="color: #000;">{% if reviewsOjb.user %} {{ reviewsOjb.user.username }} {% else %} Guest {% endif %}</span></strong>
											<br><span class="s-text15 m-l-10" style="color: #929090;">{{ reviewsOjb.reviews }}</span>
										</div>
						 			{% endfor %}
			 					</div>

							</div>
						</div>
					{% endif %} -->
				</div>
			</div>
		</div>
		
	
	
</form>
{% endblock %}
{% block custom_scripts %}
<script src="https://cdn.jsdelivr.net/momentjs/2.14.1/moment-with-locales.min.js"></script>
	<script type="text/javascript" src="{% static 'js/site.js' %}"></script>
	<script src='{% static "js/datepicker.js" %}'></script>
	<script src='{% static "js/Drift.js" %}'></script>
    <script type="text/javascript">
   $(document).ready(function() {
	  var indexId = Number('{{ cart_details.days_index }}');
	  if(indexId != ""){
	 		document.getElementById("days_"+(indexId-1)).checked = true;
	 		calculateRent('{{rent_details.percent_value}}','1','{{ product_details.mrp }}','{{ cart_details.days_index }} days','{{ product_details.mrp }}','0');
	  } 
	  else{
		  	document.getElementById("days_1").checked = true;
		  	calculateRent('{{rent_details.percent_value}}','1','{{ product_details.mrp }}','2 days','{{ product_details.mrp }}','0');
		  	// $("[data-location='days_1']").hide();
	  }

    });

    function rentDate(){
   		$('#from_selected_days').datepicker({
		    onSelect: function(dateText) {
		    	// days cont
		      	var $radio = $('input[name=days]:checked');
				var updateDay = $radio.val();
				var id = $radio.attr('id');

				// disabled date
	
				// end disabld date

				days_data = document.getElementById(id).value; 
				day = parseInt(days_data.split(" ")[0]);
				// console.log(day);
				// end days count

				// to date 
				// alert(dateText);
				var result = new Date(dateText);			
				// var fromdatearray = dateText.split("/");
				// var fromnewdate = fromdatearray[1] + '/' + fromdatearray[0] + '/' + fromdatearray[2];
				// console.log(fromnewdate);
				// var x = document.getElementById("from_selected_days");
				// x.value = fromnewdate;

				// alert((result.getMonth() + 1) + '/' + result.getDate() + '/' +  result.getFullYear());
				result.setDate(result.getDate() + day);
				
				yr      = result.getFullYear();
				month   = result.getMonth() < 10 ? '0' + (result.getMonth() + 1) : result.getMonth();
				day     = result.getDate()  < 10 ? '0' + result.getDate()  : result.getDate();

				dateFormatted = day + '/' + month + '/' + yr;
				
				// dateFormatted = (result.getMonth() + 1) + '/' + result.getDate() + '/' +  result.getFullYear();
				// console.log(dateFormatted);
				var datearray = dateFormatted.split("/");
				var newdate = datearray[1] + '/' + datearray[0] + '/' + datearray[2];
				// console.log(newdate);

				// console.log(dateText.setDate(dateText + numberOfDaysToAdd)); 
				var y = document.getElementById("to_selected_days");
				y.value = newdate;

				// days value
				// var days_count = $( "[id='days_']" ).val();
		    }
		});
   	}

 //   	function myFunction() {
 //   		var $radio = $('input[name=days]:checked');
	// 	var updateDay = $radio.val();
	// 	var id = $radio.attr('id');

	// 	days_data = document.getElementById(id).value; 
	// 	day = parseInt(days_data.split(" ")[0]);
	// 	console.log(day);
				
 //   		// var daysCount = $("#id_days_index").val();
 //   		// console.log(daysCount);
 //   	    var from_date = document.getElementById("from_selected_days").value;
 //   	    console.log(from_date);
 //   	    var someDate = new Date();
	// 	var numberOfDaysToAdd = day;
	// 	console.log(someDate.setDate(someDate.getDate() + numberOfDaysToAdd)); 
	// 	var dd = someDate.getDate();
	// 	var mm = someDate.getMonth() + 1;
	// 	var y = someDate.getFullYear();

	// 	var someFormattedDate = mm + '/'+ dd + '/'+ y;
	// 	console.log(someFormattedDate);
	// 	var y = document.getElementById("to_selected_days");
	// 	y.value = someFormattedDate; 
	// }
   	
    new Drift(document.querySelector('.drift-demo-trigger'), {
        paneContainer: document.querySelector('.detail'),
        inlinePane: 900,
        inlineOffsetY: -85,
        containInline: true,
        hoverBoundingBox: true
      });

    // function newAddToCart()
    // {
    // 	var product_detail = {{ product_details.id }};
    // 	console.log(product_detail);

    // 	window.location.href = "/action_add_to_cart/"+response.prod_slug;
    
   </script>
{% endblock %}