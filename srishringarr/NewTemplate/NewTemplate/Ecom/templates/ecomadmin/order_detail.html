{% load staticfiles %}
{% block content %}

<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">

        <title>Orders</title>

        <meta name="description" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
        <meta name="author" content="pixelcave">
        <meta name="robots" content="noindex, nofollow">

        <!-- Open Graph Meta -->
        <meta property="og:title" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework">
        <meta property="og:site_name" content="Dashmix">
        <meta property="og:description" content="Dashmix - Bootstrap 4 Admin Template &amp; UI Framework created by pixelcave and published on Themeforest">
        <meta property="og:type" content="website">
        <meta property="og:url" content="">
        <meta property="og:image" content="">
        <link href="{% static 'assets/js/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css' %}" rel="stylesheet" type="text/css">
        <!-- Icons -->
        <!-- The following icons can be replaced with your own, they are used by desktop and mobile browsers -->
        <link rel="shortcut icon" href="{% static 'assets/media/favicons/favicon.png' %}">
        <link rel="icon" type="image/png" sizes="192x192" href="{% static 'assets/media/favicons/favicon-192x192.png' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/media/favicons/apple-touch-icon-180x180.png' %}">
        <!-- END Icons -->

        <!-- Stylesheets -->
        <!-- Fonts and Dashmix framework -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,400i,600,700">
        <link rel="stylesheet" id="css-main" href="{% static 'assets/css/dashmix.min.css' %}">

        <!-- You can include a specific file from css/themes/ folder to alter the default color theme of the template. eg: -->
        <!-- <link rel="stylesheet" id="css-theme" href="assets/css/themes/xwork.min.css"> -->
        <link rel="stylesheet" id="css-theme" href="{% static 'assets/css/themes/xmodern.min.css' %}">
        <!-- END Stylesheets -->
    </head>
    <body style="background-color: #f1f1f1">
        <!-- Page Container -->
        <!--
            Available classes for #page-container:

        GENERIC

            'enable-cookies'                            Remembers active color theme between pages (when set through color theme helper Template._uiHandleTheme())

        SIDEBAR & SIDE OVERLAY

            'sidebar-r'                                 Right Sidebar and left Side Overlay (default is left Sidebar and right Side Overlay)
            'sidebar-mini'                              Mini hoverable Sidebar (screen width > 991px)
            'sidebar-o'                                 Visible Sidebar by default (screen width > 991px)
            'sidebar-o-xs'                              Visible Sidebar by default (screen width < 992px)
            'sidebar-dark'                              Dark themed sidebar

            'side-overlay-hover'                        Hoverable Side Overlay (screen width > 991px)
            'side-overlay-o'                            Visible Side Overlay by default

            'enable-page-overlay'                       Enables a visible clickable Page Overlay (closes Side Overlay on click) when Side Overlay opens

            'side-scroll'                               Enables custom scrolling on Sidebar and Side Overlay instead of native scrolling (screen width > 991px)

        HEADER

            ''                                          Static Header if no class is added
            'page-header-fixed'                         Fixed Header


        Footer

            ''                                          Static Footer if no class is added
            'page-footer-fixed'                         Fixed Footer (please have in mind that the footer has a specific height when is fixed)

        HEADER STYLE

            ''                                          Classic Header style if no class is added
            'page-header-dark'                          Dark themed Header
            'page-header-glass'                         Light themed Header with transparency by default
                                                        (absolute position, perfect for light images underneath - solid light background on scroll if the Header is also set as fixed)
            'page-header-glass page-header-dark'         Dark themed Header with transparency by default
                                                        (absolute position, perfect for dark images underneath - solid dark background on scroll if the Header is also set as fixed)

        MAIN CONTENT LAYOUT

            ''                                          Full width Main Content if no class is added
            'main-content-boxed'                        Full width Main Content with a specific maximum width (screen width > 1200px)
            'main-content-narrow'                       Full width Main Content with a percentage width (screen width > 1200px)
        -->
        <div id="page-container" class="sidebar-o sidebar-dark side-scroll page-header-fixed main-content-boxed">

            <!-- Sidebar -->
            <!--
                Sidebar Mini Mode - Display Helper classes

                Adding 'smini-hide' class to an element will make it invisible (opacity: 0) when the sidebar is in mini mode
                Adding 'smini-show' class to an element will make it visible (opacity: 1) when the sidebar is in mini mode
                    If you would like to disable the transition animation, make sure to also add the 'no-transition' class to your element

                Adding 'smini-hidden' to an element will hide it when the sidebar is in mini mode
                Adding 'smini-visible' to an element will show it (display: inline-block) only when the sidebar is in mini mode
                Adding 'smini-visible-block' to an element will show it (display: block) only when the sidebar is in mini mode
            -->
            <nav id="sidebar" aria-label="Main Navigation">
                <!-- Side Header (mini Sidebar mode) -->
                <div class="smini-visible-block">
                    <div class="content-header bg-black-10">
                        <!-- Logo -->
                        <a class="link-fx font-size-lg text-dual" href="index.html">
                            <span class="text-muted"></span><span class="text-dual">M</span>
                        </a>
                        <!-- END Logo -->
                    </div>
                </div>
                <!-- END Side Header (mini Sidebar mode) -->

                <!-- Side Header (normal Sidebar mode) -->
                <div class="smini-hidden">
                    <div class="content-header justify-content-lg-center">
                        <!-- Logo -->
                        <a class="link-fx font-size-lg text-dual" href="index.html">
                            <span class="text-muted"></span><span class="text-dual">Sri Shrinngarr</span>
                        </a>
                        <!-- END Logo -->

                        <!-- Options -->
                        <div class="d-lg-none">
                            <!-- Close Sidebar, Visible only on mobile screens -->
                            <!-- Layout API, functionality initialized in Template._uiApiLayout() -->
                            <a class="text-white ml-2" data-toggle="layout" data-action="sidebar_close" href="javascript:void(0)">
                                <i class="fa fa-times-circle"></i>
                            </a>
                            <!-- END Close Sidebar -->
                        </div>
                        <!-- END Options -->
                    </div>
                </div>
                <!-- END Side Header (normal Sidebar mode) -->

                <!-- Side Actions -->
                <!-- <div class="content-side content-side-full text-center bg-black-10">
                    <div class="smini-hide">
                        <img class="img-avatar" src="assets/media/avatars/avatar15.jpg" alt="">
                        <div class="mt-2 mb-1 font-w600">Dr. Taylor</div>
                        <a class="text-white-50 mr-1" href="javascript:void(0)">
                            <i class="fa fa-fw fa-user-md"></i>
                        </a>
                        <a class="text-white-50 mr-1" href="javascript:void(0)">
                            <i class="fa fa-fw fa-cog"></i>
                        </a>
                        <a class="text-white-50" href="javascript:void(0)">
                            <i class="fa fa-fw fa-sign-out-alt"></i>
                        </a>
                    </div>
                </div> -->
                <!-- END Side Actions -->

                <!-- Side Navigation -->
                <div class="content-side content-side-full">
                    <ul class="nav-main">
                       
                       
                       <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'home' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">Home</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'home' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">site settings</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'dashboard' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'category' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">Category</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'orders' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">Orders</span>
                            </a>
                        </li>

                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'products' %}">
                                <i class="nav-main-link-icon fa fa-pencil-alt"></i>
                                <span class="nav-main-link-name">Products</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'Customers' %}">
                                <i class="nav-main-link-icon fa fa-lock"></i>
                                <span class="nav-main-link-name">Customers</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'offers' %}">
                                <i class="nav-main-link-icon fa fa-flag"></i>
                                <span class="nav-main-link-name">Report</span>
                            </a>
                        </li>
                        <li class="nav-main-item">
                            <a class="nav-main-link" href="{% url 'login'  %}">
                                <i class="nav-main-link-icon si si-power"></i>
                                <span class="nav-main-link-name">Logout</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- END Side Navigation -->
            </nav>
            <!-- END Sidebar -->

            <!-- Header -->
            
                <!-- END Header Content -->

                <!-- Header Search -->
                <div id="page-header-search" class="overlay-header bg-white">
                    <div class="content-header">
                        <form class="w-100" action="be_pages_generic_search.html" method="POST">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <!-- Layout API, functionality initialized in Template._uiApiLayout() -->
                                    <button type="button" class="btn btn-danger" data-toggle="layout" data-action="header_search_off">
                                        <i class="fa fa-fw fa-times-circle"></i>
                                    </button>
                                </div>
                                <input type="text" class="form-control border-0" placeholder="Search Application.." id="page-header-search-input" name="page-header-search-input">
                            </div>
                        </form>
                    </div>
                </div>
                <!-- END Header Search -->

                <!-- Header Loader -->
                <!-- Please check out the Loaders page under Components category to see examples of showing/hiding it -->
              <!--   <div id="page-header-loader" class="overlay-header bg-primary-darker">
                    <div class="content-header">
                        <div class="w-100 text-center">
                            <i class="fa fa-fw fa-2x fa-sun fa-spin text-white"></i>
                        </div>
                    </div>
                </div>
                <!-- END Header Loader
            </header> -->
            <!-- END Header -->

            <!-- Main Container -->
            <main id="main-container">

                <!-- Page Content -->
                <div class="content">
                    <!-- Quick Menu -->
                    
                    
                    <!-- END Quick Menu -->

                   

                     

                    <!-- Appointments -->
                    <div class="block block-rounded invisible" data-toggle="appear">
                        <div class="block-header block-header-default">

                            <div class="block-content">
                                 <div class="row items-push">
                            <div class="col-md-6" style="margin-left: 40px;">
                                
                                    <div class="form-group">
                                                <label >Order Id: {{ order.id }}<span class="text-danger"></span></label>
                                             
                                            </div>
                                           
                                            

                                            <div class="form-group">
                                            	{% for oi in order_items %} 
                                                
                                                <label>
                                                	<img style="height: 140px;width: 140px;" src="{% static 'images/catalog/products/main/' %}{{ oi.product.product_image }}" class="imgStyle" /></label>
                                                	 <br/>
                                                	 <label >Product Name:</label><br/>
														{{ oi.product.name }}<br/><br/>
												 <label>	
														RS.{{ oi.subtotal }}<br/>
													{% endfor %}</label>
                                              
                                            </div>

											
											<div class="form-group">
                                                <label>Deliver To:<br>
	                                                {{ order.address.name }}<br/>
													{{order.user.email}}<br>
													{{order.user.mobile}}<br>
													{{ order.address.address }}<br/>
													{{ order.address.area }}, {{ order.address.city }}
													{{ order.address.state }}, {{ order.address.country }} - {{ order.address.pin_zip }}
												 </label>

                                              
                                            </div>                                            
                                       



                                             
                               
                            </div>


                            <div class="col-lg-6 col-xl-5" style="margin-right: 40px;">
                                {%csrf_token%}
                               
                               				 <form method="post" id="deliverystatus">
											{% csrf_token %}
                                            <div class="form-group">
                                                <label for="val-skill">Order Status:<span class="text-danger">*</span></label>
                                                <select name="order_status" id="order_status" class="form-control" style="width:30%;">
													<option value="P" {% if order.status == 'P' %}selected="selected"{% endif %}>Pending</option>
													<option value="C" {% if order.status == 'C' %}selected="selected"{% endif %}>Confirmed</option>
													<option value="S" {% if order.status == 'S' %}selected="selected"{% endif %}>Shipped</option>
													<option value="D" {% if order.status == 'D' %}selected="selected"{% endif %}>Delivered</option>
													<option value="X" {% if order.status == 'X' %}selected="selected"{% endif %}>Cancelled</option>
												</select>
                                            </div>
                                        </form>


                                             <div class="form-group">
                                                <label for="meta_keywords">{% if order.tax %}Order Tax: {{ order.tax }}<br/>{% endif %}
												Order Total: Rs. {{ order.total }}<br/>
                                                Deposit_Amount: Rs.{{order.final_deposite}}<br/>
                                                Balance_Amount: Rs.{{order.balance_deposit}}
                                                <!-- Balance_Amount to Return: Rs.{{order.balance_deposit}} -->
                                                <br/><span class="text-danger"></span></label>
                                            </div>

                                             <button class="btn btn-hero-success " style="float: left;" id="save_btn" onclick="saveButton();">Save</button>

                                             <br>
                                             <br>
                                            
                                            {% if order.balance_deposit == '0' %}
                                                <label for="val-meta_description">Deposite collected<span class="text-danger">*</span></label>

                                            {% else %}
                                             <div class="form-group">
                                                <label for="val-meta_description">Deposite collect Dates:<span class="text-danger">*</span></label>
                                               <form method="post">
													{% csrf_token %}
													<input type="text" class="datepicker-here form-control" data-language="en" placeholder="Deposite Taken date" name="deposite_taken" id="deposite_taken_id" value="{{order.deposite_taken}}">
													<input type="hidden" value="{{ order.id }}" id="orderId">
													<br>
                                                    <input type="text" class="form-control" placeholder="Deposite_collect_amount" name="deposite_taken_amount" id="deposite_taken_amount_id" value="{{order.deposite_taken}}">
                                                    <br>


													<button id="save_deposite_collect_btn" class="btn btn-hero-success" 
													 onclick="saveDepositeButton();">Save</button>
												</form><br/>
                                            </div>
                                            {% endif %}
                                            <div class="form-group">
                                                <label for="val-meta_description">Deposite return Dates:<span class="text-danger">*</span></label>
                                               <form method="post">
													{% csrf_token %}
													<input type="text" class="datepicker-here form-control" data-language="en" placeholder="Deposite Given date" name="deposite_given" id="deposite_given_id" value="{{order.deposite_given}}">
													<input type="hidden" value="{{ order.id }}" id="orderId">
													
                                                    <br>
                                                    <input type="text" class="form-control" placeholder="Deposite_refund_amount" name="deposite_refund_amount" id="deposite_refund_amount_id" value="{{order.deposite_given}}">
                                                    <br>
													<button id="save_deposite_return_btn" class="btn btn-hero-success" onclick="saveDepositeReturnButton();">Save</button>
												</form><br/>
                                            </div>
                                            

                                           

                            </div>


                            </div>
                             


                        </form>
                            </div>
                        </div>
                    </div>
                    <!-- END Appointments -->

                    <!-- Payments -->
                   
                    <!-- END Payments -->
                </div>
                <!-- END Page Content -->

            </main>
            <!-- END Main Container -->

            <!-- Footer -->
           
            <!-- END Footer -->
        </div>
        <!-- END Page Container -->

        <!--
            Dashmix JS Core

            Vital libraries and plugins used in all pages. You can choose to not include this file if you would like
            to handle those dependencies through webpack. Please check out assets/_es6/main/bootstrap.js for more info.

            If you like, you could also include them separately directly from the assets/js/core folder in the following
            order. That can come in handy if you would like to include a few of them (eg jQuery) from a CDN.

            assets/js/core/jquery.min.js
            assets/js/core/bootstrap.bundle.min.js
            assets/js/core/simplebar.min.js
            assets/js/core/jquery-scrollLock.min.js
            assets/js/core/jquery.appear.min.js
            assets/js/core/js.cookie.min.js
        -->
        <script src="{% static 'assets/js/dashmix.core.min.js' %}"></script>

        <!--
            Dashmix JS

            Custom functionality including Blocks/Layout API as well as other vital and optional helpers
            webpack is putting everything together at assets/_es6/main/app.js
        -->
         <script src="{% static 'assets/js/dashmix.app.min.js' %}"></script>

        <script src='{% static "assets/js/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js" %}'></script>
<script>

function saveButton()
{	
	alert("hereeeeeeeeeeeeeeee")
	// data = "Status has been saved";
	update_status();
	// $("#deliverystatus").attr('action','/emailsend/')
	alert("hereeeeeeeeeeeeeeee toooooooooo	")
	// alert(data);
	window.location.href = "/orders/"
}

function saveDepositeButton()
{
	// data = "Status has been saved";
	deposite_dates();

    alert("GGGGGGGGGGGGGGGGG")

    alert("kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk")
	// alert(data);
	window.location.href = "/orders/"
}

function saveDepositeReturnButton()
{
	// data = "Status has been saved";
	deposite_return_dates();

    alert("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYyG")
    alert("kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk")
	// alert(data);
	window.location.href = "/orders/"
}
var date = new Date();

var currentMonth = date.getMonth();

var currentDate = date.getDate();

var currentYear = date.getFullYear();

// $('input[id$=deposite_taken_id]').datepicker({
//     minDate: new Date(currentDate, currentMonth, currentYear),
//     dateFormat: 'dd-mm-yy'
// });

$('input[id$=deposite_given_id]').datepicker({
    dateFormat: 'dd-mm-yy'
});
$(document).ready(function () {
    var date = new Date();
    var currentMonth = date.getMonth();
    var currentDate = date.getDate();
    var currentYear = date.getFullYear();

    $('input[id$=deposite_taken_id]').datepicker({
        minDate: new Date(currentYear, currentMonth, currentDate),
        dateFormat: 'yy-mm-dd'
    });
})

</script>
	
<script src='{% static "js/validation.js" %}'></script>
    </body>
</html>


{% endblock %}
